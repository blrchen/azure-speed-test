<div class="regions page-container py-3">
  <header class="mb-8 flex flex-col gap-6">
    <div class="page-intro">
      <h1 class="page-title page-intro__title">Azure Regions</h1>
      <p class="page-intro__description max-w-3xl text-base">
        Azure regions are sets of datacenters inside a latency-defined perimeter, connected through
        a dedicated regional network. Explore availability, geography, and restricted access
        locations.
      </p>
    </div>
    <aside class="flex flex-wrap items-center gap-2 text-sm">
      <span class="text-xs font-semibold uppercase tracking-wide text-slate-600">
        Other Azure clouds
      </span>
      <a href="/Information/AzureChinaRegions" class="app-tag app-tag--primary">
        China operated by 21Vianet
      </a>
      <a href="/Information/AzureUSGovernmentRegions" class="app-tag app-tag--primary">
        US Government regions
      </a>
    </aside>
  </header>

  <section class="mb-10 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
    <article
      class="flex items-center gap-4 rounded-2xl border border-brand/20 bg-white p-4 shadow-sm"
    >
      <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-brand/10 text-brand">
        <app-hero-icon name="heroGlobeAlt" class="h-6 w-6" aria-hidden="true" />
      </div>
      <div>
        <span class="block text-xs font-semibold uppercase tracking-wide text-slate-600">
          Global cloud regions
        </span>
        <span class="text-2xl font-semibold text-slate-900">
          {{ filteredAzureGlobalCloudRegions().length }}
        </span>
      </div>
    </article>
    <article
      class="flex items-center gap-4 rounded-2xl border border-amber-200 bg-white p-4 shadow-sm"
    >
      <div
        class="flex h-12 w-12 items-center justify-center rounded-xl bg-amber-100 text-amber-600"
      >
        <app-hero-icon name="heroLockClosed" class="h-6 w-6" aria-hidden="true" />
      </div>
      <div>
        <span class="block text-xs font-semibold uppercase tracking-wide text-slate-600">
          Restricted regions
        </span>
        <span class="text-2xl font-semibold text-slate-900">
          {{ filteredAccessRestrictedRegions().length }}
        </span>
      </div>
    </article>
    <article
      class="flex items-center gap-4 rounded-2xl border border-emerald-200 bg-white p-4 shadow-sm"
    >
      <div
        class="flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-100 text-emerald-600"
      >
        <app-hero-icon name="heroBuildingOffice" class="h-6 w-6" aria-hidden="true" />
      </div>
      <div>
        <span class="block text-xs font-semibold uppercase tracking-wide text-slate-600">
          Upcoming regions
        </span>
        <span class="text-2xl font-semibold text-slate-900">
          {{ upcomingRegions.length }}
        </span>
      </div>
    </article>
  </section>

  <section class="mb-8 grid gap-4 md:grid-cols-2">
    <div class="flex flex-col gap-2">
      <label for="searchInput" class="text-sm font-semibold text-slate-900">Search regions</label>
      <div
        class="flex items-center gap-3 rounded-xl border border-brand/20 bg-white px-3 py-2 shadow-sm"
      >
        <app-hero-icon name="heroMagnifyingGlass" class="h-4 w-4 text-brand" aria-hidden="true" />
        <input
          type="text"
          id="searchInput"
          placeholder="Search by region name or locationâ€¦"
          [formControl]="searchControl"
        />
        @if (hasSearchTerm()) {
          <button
            type="button"
            (click)="clearSearch()"
            aria-label="Clear search"
            class="text-slate-500 transition-colors hover:text-slate-700"
          >
            <app-hero-icon name="heroXMark" class="h-4 w-4" aria-hidden="true" />
          </button>
        }
      </div>
    </div>
    <div class="flex flex-col gap-2">
      <label for="geographyFilter" class="text-sm font-semibold text-slate-900">
        Filter by geography
      </label>
      <select
        id="geographyFilter"
        [formControl]="geographyControl"
        class="rounded-xl border border-brand/20 px-3 py-2 text-sm text-slate-900 outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/30"
      >
        <option value="">All region groups</option>
        @for (regionGroup of availableRegionGroups(); track regionGroup) {
          <option [value]="regionGroup">
            {{ regionGroup }}
          </option>
        }
      </select>
    </div>
  </section>

  <section class="regions__section">
    <header class="regions__section-header">
      <h2>Azure Global Cloud Regions</h2>
      <p>General availability regions with full Azure service coverage.</p>
    </header>
    <div
      class="region-table overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm"
    >
      <div class="region-table__scroll">
        <table class="region-table__table w-full border-collapse text-sm">
          <thead
            class="bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500"
          >
            <tr>
              <th class="px-3 py-3">Region</th>
              <th class="px-3 py-3">Geography</th>
              <th class="px-3 py-3">Location</th>
              <th class="px-3 py-3">Availability zones</th>
              <th class="px-3 py-3">Paired region</th>
              <th class="w-20 px-3 py-3 text-right">Launched</th>
            </tr>
          </thead>
          <tbody>
            @for (region of filteredAzureGlobalCloudRegions(); track region.regionId) {
              <tr
                class="border-t border-slate-200 bg-white transition odd:bg-slate-50/40 hover:bg-brand/5"
              >
                <td class="region-table__cell region-table__cell--region px-3 py-3 align-top">
                  <div class="flex flex-col gap-1">
                    <a
                      class="region-table__region-link"
                      [routerLink]="['/Information/AzureRegions', region.regionId]"
                    >
                      {{ region.displayName }}
                    </a>
                    <span
                      class="region-table__region-code text-xs uppercase tracking-wide text-slate-500"
                    >
                      {{ region.regionId }}
                    </span>
                  </div>
                </td>
                <td class="region-table__cell px-3 py-3 align-top text-slate-600">
                  {{ region.geography }}
                </td>
                <td
                  class="region-table__cell region-table__cell--location min-w-[7rem] px-3 py-3 align-top text-slate-600"
                >
                  {{ region.datacenterLocation }}
                </td>
                <td class="region-table__cell region-table__cell--zones px-3 py-3 align-top">
                  <span
                    class="app-badge-pill"
                    [class.app-badge-pill--success]="!!region.availabilityZoneCount"
                    [class.app-badge-pill--warning]="!region.availabilityZoneCount"
                  >
                    {{ region.availabilityZoneCount || 'Not supported' }}
                  </span>
                </td>
                <td
                  class="region-table__cell region-table__cell--paired px-3 py-3 align-top text-slate-600"
                >
                  {{ region.pairedRegion || '-' }}
                </td>
                <td
                  class="region-table__cell region-table__cell--launch px-3 py-3 text-right text-slate-700"
                >
                  {{ region.launchYear || '-' }}
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
      @if (!filteredAzureGlobalCloudRegions().length) {
        <div class="px-4 py-6 text-center text-sm text-slate-500">
          No regions match your filters. Try adjusting your search.
        </div>
      }
    </div>
  </section>

  <section class="regions__section">
    <header class="regions__section-header">
      <h2>Access Restricted Regions</h2>
      <p>Azure regions with limited availability, typically requiring special onboarding.</p>
    </header>
    <div
      class="region-table overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm"
    >
      <div class="region-table__scroll">
        <table class="region-table__table w-full border-collapse text-sm">
          <thead
            class="bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500"
          >
            <tr>
              <th class="px-3 py-3">Region</th>
              <th class="px-3 py-3">Geography</th>
              <th class="px-3 py-3">Location</th>
              <th class="px-3 py-3">Available to</th>
            </tr>
          </thead>
          <tbody>
            @for (region of filteredAccessRestrictedRegions(); track region.regionId) {
              <tr
                class="border-t border-slate-200 bg-white transition odd:bg-slate-50/40 hover:bg-brand/5"
              >
                <td class="region-table__cell region-table__cell--region px-3 py-3 align-top">
                  <div class="flex flex-col gap-1">
                    <a
                      class="region-table__region-link"
                      [routerLink]="['/Information/AzureRegions', region.regionId]"
                    >
                      {{ region.displayName }}
                    </a>
                    <span
                      class="region-table__region-code text-xs uppercase tracking-wide text-slate-500"
                    >
                      {{ region.regionId }}
                    </span>
                  </div>
                </td>
                <td class="region-table__cell px-3 py-3 align-top text-slate-600">
                  {{ region.geography }}
                </td>
                <td
                  class="region-table__cell region-table__cell--location min-w-[7rem] px-3 py-3 align-top text-slate-600"
                >
                  {{ region.datacenterLocation }}
                </td>
                <td
                  class="region-table__cell region-table__cell--available max-w-[17rem] whitespace-pre-line break-words px-3 py-3 align-top text-sm leading-6 text-slate-700"
                >
                  {{ region.availableTo || 'Limited availability' }}
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
      @if (!filteredAccessRestrictedRegions().length) {
        <div class="px-4 py-6 text-center text-sm text-slate-500">
          No restricted regions match your filters.
        </div>
      }
    </div>
  </section>

  <section class="regions__section">
    <header class="regions__section-header">
      <h2>Upcoming Azure Regions</h2>
      <p>Microsoft-announced regions that are under development.</p>
    </header>
    <div class="grid gap-4 sm:grid-cols-2 xl:grid-cols-3">
      @for (region of upcomingRegions; track region.name) {
        <article class="rounded-2xl border border-brand/20 bg-white p-4 shadow-sm">
          <span class="text-xs font-semibold uppercase tracking-wide text-slate-600">
            {{ region.country }}
          </span>
          <h3 class="mt-2 text-lg font-semibold text-slate-900">{{ region.name }}</h3>
          <a
            class="inline-flex items-center gap-1.5 text-sm font-semibold text-brand transition hover:text-brand/80"
            [href]="region.link"
            target="_blank"
            rel="noopener"
          >
            Learn more
            <app-hero-icon
              name="heroArrowTopRightOnSquare"
              class="h-4 w-4 text-brand"
              aria-hidden="true"
            />
          </a>
        </article>
      }
    </div>
  </section>

  <section class="mt-12">
    <header class="regions__section-header">
      <h2>Frequently asked questions</h2>
      <p>Helpful context when planning region-specific deployments.</p>
    </header>
    <div class="mt-6 space-y-4">
      <details
        class="group rounded-2xl border border-slate-200 bg-white/95 shadow-sm transition-colors duration-200 ease-out open:border-brand/40 open:shadow-brand-sm"
      >
        <summary
          class="flex w-full cursor-pointer items-center justify-between gap-4 px-6 py-5 text-left text-base font-semibold text-slate-900 outline-none transition-colors hover:text-brand/90 focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white [&::-webkit-details-marker]:hidden"
        >
          <span class="flex-1 text-base font-semibold text-slate-900">
            What defines an Azure region?
          </span>
          <app-hero-icon
            name="heroChevronDown"
            class="h-4 w-4 text-slate-400 transition-transform duration-200 ease-in-out group-open:rotate-180 group-open:text-brand"
            aria-hidden="true"
          />
        </summary>
        <div
          class="space-y-3 border-t border-slate-100 px-6 py-5 text-sm leading-relaxed text-slate-600 [&_a]:text-brand [&_a]:underline [&_a]:underline-offset-4 [&_ol]:list-decimal [&_ol]:space-y-2 [&_ol]:pl-5 [&_strong]:text-slate-800 [&_ul]:list-disc [&_ul]:space-y-2 [&_ul]:pl-5"
        >
          Azure regions are sets of datacenters connected through a dedicated low-latency network.
          They are grouped into geographies for data residency and compliance. Some services require
          availability zones, which are multiple independent datacenters within a region.
        </div>
      </details>
      <details
        class="group rounded-2xl border border-slate-200 bg-white/95 shadow-sm transition-colors duration-200 ease-out open:border-brand/40 open:shadow-brand-sm"
      >
        <summary
          class="flex w-full cursor-pointer items-center justify-between gap-4 px-6 py-5 text-left text-base font-semibold text-slate-900 outline-none transition-colors hover:text-brand/90 focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white [&::-webkit-details-marker]:hidden"
        >
          <span class="flex-1 text-base font-semibold text-slate-900">
            How do paired regions work?
          </span>
          <app-hero-icon
            name="heroChevronDown"
            class="h-4 w-4 text-slate-400 transition-transform duration-200 ease-in-out group-open:rotate-180 group-open:text-brand"
            aria-hidden="true"
          />
        </summary>
        <div
          class="space-y-3 border-t border-slate-100 px-6 py-5 text-sm leading-relaxed text-slate-600 [&_a]:text-brand [&_a]:underline [&_a]:underline-offset-4 [&_ol]:list-decimal [&_ol]:space-y-2 [&_ol]:pl-5 [&_strong]:text-slate-800 [&_ul]:list-disc [&_ul]:space-y-2 [&_ul]:pl-5"
        >
          Every Azure region is paired with another region within the same geography for disaster
          recovery. Paired regions are designed to be at least 300 miles apart and prioritized for
          sequential updates to reduce downtime during platform maintenance.
        </div>
      </details>
      <details
        class="group rounded-2xl border border-slate-200 bg-white/95 shadow-sm transition-colors duration-200 ease-out open:border-brand/40 open:shadow-brand-sm"
      >
        <summary
          class="flex w-full cursor-pointer items-center justify-between gap-4 px-6 py-5 text-left text-base font-semibold text-slate-900 outline-none transition-colors hover:text-brand/90 focus-visible:ring-2 focus-visible:ring-brand/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white [&::-webkit-details-marker]:hidden"
        >
          <span class="flex-1 text-base font-semibold text-slate-900">
            Why are some regions restricted?
          </span>
          <app-hero-icon
            name="heroChevronDown"
            class="h-4 w-4 text-slate-400 transition-transform duration-200 ease-in-out group-open:rotate-180 group-open:text-brand"
            aria-hidden="true"
          />
        </summary>
        <div
          class="space-y-3 border-t border-slate-100 px-6 py-5 text-sm leading-relaxed text-slate-600 [&_a]:text-brand [&_a]:underline [&_a]:underline-offset-4 [&_ol]:list-decimal [&_ol]:space-y-2 [&_ol]:pl-5 [&_strong]:text-slate-800 [&_ul]:list-disc [&_ul]:space-y-2 [&_ul]:pl-5"
        >
          Regions like Azure Government or Azure China require additional onboarding due to
          compliance or sovereignty requirements. Customers must meet specific eligibility criteria
          before gaining access to these datacenters.
        </div>
      </details>
    </div>
  </section>

  <section class="regions__resources mt-5">
    <header class="regions__section-header">
      <h2>Additional resources</h2>
      <p>Deeper guidance for planning deployments across Azure regions.</p>
    </header>
    <div class="regions-resources__grid">
      <article class="resource-card">
        <h3 class="resource-card__title">Azure datacenters map</h3>
        <p class="resource-card__body">Explore Microsoft's datacenters around the globe.</p>
        <a
          href="https://datacenters.microsoft.com/globe/explore"
          target="_blank"
          class="resource-card__link"
        >
          Learn more
        </a>
      </article>
      <article class="resource-card">
        <h3 class="resource-card__title">Select Azure regions</h3>
        <p class="resource-card__body">Guidance on choosing regions for your workloads.</p>
        <a
          href="https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-setup-guide/regions"
          target="_blank"
          class="resource-card__link"
        >
          Learn more
        </a>
      </article>
      <article class="resource-card">
        <h3 class="resource-card__title">BCDR & cross-region replication</h3>
        <p class="resource-card__body">
          Strategies for cross-region redundancy and disaster recovery.
        </p>
        <a
          href="https://learn.microsoft.com/en-us/azure/reliability/cross-region-replication-azure"
          target="_blank"
          class="resource-card__link"
        >
          Learn more
        </a>
      </article>
    </div>
  </section>
</div>
