<div>
  <div *ngIf="isInitialized && selectedRegionCount === 0" class="alert alert-danger">
    <strong>Please select at least one region to start test.</strong>
  </div>
  <div class="row g-2">
    <div class="col-12 col-md-4" *ngFor="let group of regionGroups">
      <div class="border rounded shadow-sm h-100">
        <div class="d-flex justify-content-between align-items-center bg-light border-bottom p-3">
          <strong>{{ group.geographyGroup }}</strong>
          <div class="form-check form-switch">
            <input
              class="form-check-input"
              type="checkbox"
              [id]="group.geographyGroup"
              [checked]="group.checked"
              (change)="onChange(null, group)"
            />
            <label class="form-check-label" [for]="group.geographyGroup">Select all</label>
          </div>
        </div>
        <div class="p-2">
          <label
            *ngFor="let region of group?.regions"
            [for]="region.name"
            class="form-check-label mb-2"
            [ngClass]="{ 'text-primary fw-medium': region.checked }"
            style="margin-right: 10px"
          >
            <input
              type="checkbox"
              [id]="region.name"
              [checked]="region.checked"
              (change)="onChange(region, group)"
              class="form-check-input me-2"
            />
            {{ region.displayName }}
          </label>
        </div>
      </div>
    </div>
  </div>
</div>
